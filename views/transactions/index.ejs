<!DOCTYPE html>
<html>
  <head>
    <title>Transactions</title>
  </head>
  <body>
    <h1>Transactions - Welcome <%= user.username %></h1>

    <a href="/transactions/add">Add Transaction</a> |
    <a href="/auth/logout">Logout</a>

    <h2>Your Transactions</h2>

    <% if (transactions.length > 0) { %>
    <table border="1">
      <tr>
        <th>Date</th>
        <th>Category</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Actions</th>
      </tr>
      <% transactions.forEach(function(transaction) { %>
      <tr>
        <td><%= new Date(transaction.date).toDateString() %></td>
        <td><%= transaction.category %></td>
        <td><%= transaction.type %></td>
        <td>$<%= transaction.amount %></td>
        <td>
          <a href="/transactions/edit/<%= transaction.id %>">Edit</a> |
          <form
            style="display: inline"
            method="POST"
            action="/transactions/delete/<%= transaction.id %>"
            onsubmit="return confirm('Delete this transaction?')"
          >
            <button
              type="submit"
              style="
                background: none;
                border: none;
                color: blue;
                text-decoration: underline;
                cursor: pointer;
              "
            >
              Delete
            </button>
          </form>
        </td>
      </tr>
      <% }); %>
    </table>
    <% } else { %>
    <p>No transactions found. <a href="/transactions/add">Add one</a></p>
    <% } %>
  </body>
</html>
